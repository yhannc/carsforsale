<!DOCTYPE HTML>
<html>
	<head>
		<title>Cars for Sale: <%=item.name%></title>
		<link rel="stylesheet" href="/style.css">
	</head>
	<body>
		<a href="/"><h1>Cars for Sale</h1></a>
		<dl itemscope itemtype="http://schema.org/Product/Car">
			<dt>Car name</dt>
			<dd itemprop="name"><%=item.name%></dd>
			<dt>Car model</dt>
			<dd itemprop="model"><a href="/models/<%=item.model%>"><%=item.model%></a></dd>
			<dt>Car model-year</dt>
			<dd itemprop="modelYear"><%=item.modelyear%></dd>
			<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
				<dt>Car price</dt>
				<dd itemprop="price"><%=item.price%></dd>
			</div>
			<% if (item.image) { %>
			<dt>Image</dt>
			<dd itemprop="image"><img src="<%=item.image%>" alt="<%=item.model%>" width="230" height="153"></dd>
			<% } %>
		</dl>
		<div class="control">
			<h2>Update car</h2>
    			<form id="update-car" method="post" action="/cars/<%=item._id%>">
        			<input type="hidden" name="_method" value="put">
        			<!-- The line above tells the server to treat this as a PUT request. -->
				<label>Car name:<br> 
                  			<input name="item[name]" value="<%=item.name%>" type="text" required>
       				</label>
        			<label>Car model:
          				<select name="item[model]" required>
            					<%  related_items.forEach(function(related_item) { %>
            					<option value="<%=related_item._id%>"
              						<% if (related_item._id === item.model) { %>selected<% } %>>
              						<%=related_item.name%>
           	 				</option>
            					<% }); %>
          				</select>
        			</label>
				<label>Car model-year:       				   
					<select name="item[modelyear]" required>
                    				<% for (var modelyears = 2012; modelyears >= 1990; modelyears = modelyears-1) {%>
            					<option value="<%=modelyears%>"
              						<% if (modelyears === Number(item.modelyear)) { %>selected<% } %>>
              						<%=modelyears%>
						</option>
            					<% } %>
          				</select>
       				</label>
				<label>Price:<br> 
                  			<input name="item[price]" value="<%=item.price%>" type="number" min="3000" step="100" required>
       				</label>
        			<label>Image:<br>
          				<input name="item[image]" value="<%=item.image%>" type="url" size="80"
						placeholder="http://www.image.com/car.jpeg>
					<input name="item[image]" value="<%=item.image%>" type="file">
				</label>
        			<button>Update</button>
      			</form>
		</div>
	</body>
</html>